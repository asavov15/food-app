{% extends "layout.html" %}

{% block content %}
<h2>Welcome to the Food App</h2>

{% if session.get("user_id") %}
  <p>Hi {{ session["username"] }}! Use this app to discover food spots around you and share your own reviews.</p>
  <p><a href="/add-spot">Add a new spot</a> or <a href="/spots">browse all spots</a>.</p>
{% else %}
  <p>Use this app to discover food spots and read reviews from other users.</p>
  <p><a href="/register">Create an account</a> or <a href="/login">log in</a> to start adding your own spots and reviews.</p>
{% endif %}

<h3>Recently added spots</h3>

{% if spots %}
  <ul>
    {% for spot in spots %}
  <li>
    <a href="/spot/{{ spot['id'] }}">{{ spot["name"] }}</a>
    {% if spot["category"] %} ({{ spot["category"] }}) {% endif %}

    {% if spot["avg_rating"] is not none %}
      – {{ spot["avg_rating"] }}★
      ({{ spot["review_count"] }} review{% if spot["review_count"] != 1 %}s{% endif %})
    {% else %}
      – No reviews yet
    {% endif %}

    <!-- TAGS -->
    <div class="tags">
      {% if spot.late_night %}<span class="tag">Late Night</span>{% endif %}
      {% if spot.fine_dining %}<span class="tag">Fine Dining</span>{% endif %}
      {% if spot.health_conscious %}<span class="tag">Health Conscious</span>{% endif %}
      {% if spot.affordable %}<span class="tag">Affordable</span>{% endif %}
      {% if spot.sweet_treat %}<span class="tag">Sweet Treat</span>{% endif %}
      {% if spot.close %}<span class="tag">Close to Harvard Yard</span>{% endif %}
    </div>
  </li>
{% endfor %}

  </ul>
  <p><a href="/spots">View all spots</a></p>
{% else %}
  <p>No spots yet. Be the first to <a href="/add-spot">add one</a>!</p>
{% endif %}

{% endblock %}
